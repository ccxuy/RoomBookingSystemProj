<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>UIC Room Booking System</title>
<!--                       CSS                       -->
<!-- Reset Stylesheet -->
<link rel="stylesheet" href="resources/css/reset.css" type="text/css" media="screen" />
<!-- Main Stylesheet -->
<link rel="stylesheet" href="resources/css/style.css" type="text/css" media="screen" />
<!-- Invalid Stylesheet. This makes stuff look pretty. Remove it if you want the CSS completely valid -->
<link rel="stylesheet" href="resources/css/invalid.css" type="text/css" media="screen" />
<!-- JQuery UI CSS   -->
<link rel="stylesheet" href="resources/css/jquery-ui-1.8.12.custom.css" type="text/css" />
<!--                       Javascripts                       -->
<!-- jQuery -->
<script type="text/javascript" src="resources/scripts/jquery-1.3.2.min.js"></script>
<!-- jQuery Configuration -->
<script type="text/javascript" src="resources/scripts/simpla.jquery.configuration.js"></script>
<!-- Facebox jQuery Plugin -->
<script type="text/javascript" src="resources/scripts/facebox.js"></script>
<!-- jQuery WYSIWYG Plugin -->
<script type="text/javascript" src="resources/scripts/jquery.wysiwyg.js"></script>
<!-- jQuery Datepicker Plugin -->
<script type="text/javascript" src="resources/scripts/jquery.datePicker.js"></script>
<script type="text/javascript" src="resources/scripts/jquery.date.js"></script>
<!-- jQuery Cookies Plugin -->
<script type="text/javascript" src="resources/scripts/jquery.cookie.js"></script>
<!-- jQuery UI Plugin -->
<script type="text/javascript" src="resources/scripts/jquery-ui-1.8.12.custom.min.js"></script>
<!-- DWR -->
<script type='text/javascript' src='/se/dwr/engine.js'></script>
<script type='text/javascript' src='/se/dwr/interface/uiaccess.js'></script>
<script type='text/javascript' src='/se/dwr/util.js'></script>
<script type="text/javascript">
	$(checkLogin);
	function loadQueryTable(){
		$("tbody").html("");
		uiaccess.query(callbackQueryTable);
	}
	function callbackQueryTable(request){
                
		for(var i=0;i<request.length;i++){
			$("tbody").append("<tr>");
			$("tbody").append("<td>"+request[i].roomID+"</td>");
			$("tbody").append("<td>Capacities</td>");
			$("tbody").append("<td>Facilities</td>");
			
			$("tbody").append("<td>"+request[i].dateBegin.toLocaleDateString()+"</td>");
			$("tbody").append("<td>"+request[i].dateEnd.toLocaleDateString()+"</td>");
			$("tbody").append("<td>"+request[i].timeBegin.toLocaleTimeString()+"</td>");
			$("tbody").append("<td>"+request[i].timeEnd.toLocaleTimeString()+"</td>");
			$("tbody").append("<td><button class=\"create-apply\"> <img src=\"resources/images/icons/pencil.png\" />Create Apply</button></td>");
			$("tbody").append("</tr>");
		}
		$( ".create-apply" )
			.button()
			.click(function() {
				$( "#dialog-form" ).dialog( "open" );
		});
	}
	function loadApplyDialog(){
		$("#apply-dialog").dialog("open");
	}
	function callbackLogin(loginRequest){
		if(loginRequest==1){
		}else{
			location.href="/se/login.html";
		}
	}
	function checkLogin(){
		var uname = $.cookie("uname"),
			passwd = $.cookie("passwd");
		$("#username").text(uname);
		loadPortal();
		uiaccess.login(uname,pwd,callbackLogin);
	}
	function logout(){
		$.cookie("uname",null);
		$.cookie("passwd",null);
		location.href="/se/login.html";
	}
	function loadPortal(){
		$("a").removeClass("current");
		$("#portal").addClass("current");
		htmlobj=$.ajax({url:"/se/portal.ajax",async:false});
		$("#main-content").html("");
		$("#main-content").html(htmlobj.responseText);
	}
	function loadQuery(){
		$("a").removeClass("current");
		$("#query").addClass("current");
		htmlobj=$.ajax({url:"/se/query.ajax",async:false});
		$("#main-content").html("");
		$("#main-content").html(htmlobj.responseText);
		$(loadQueryTable);
		$( "#dialog:ui-dialog" ).dialog( "destroy" );
		$( "#dialog-form" ).dialog({
			autoOpen: false,
			height: 450,
			width: 400,
			modal: true,
			buttons: {
				"Apply": function() {
					var bValid = true;
					allFields.removeClass( "ui-state-error" );

					bValid = bValid && checkLength( roomid, "roomID", 1, 16 );

					bValid = bValid && checkRegexp( name, /^([0-9a-z_])+$/i, "Room ID may consist of a-z, 0-9, underscores" );

					if ( bValid ) {
						//send to server
						$( this ).dialog( "close" );
					}
				},
				Cancel: function() {
					$( this ).dialog( "close" );
				}
			},
			close: function() {
				allFields.val( "" ).removeClass( "ui-state-error" );
			}
		});
	}
	function loadApp(){
		$("a").removeClass("current");
		$("#app").addClass("current");
		htmlobj=$.ajax({url:"/se/app.ajax",async:false});
		$("#main-content").html("");
		$("#main-content").html(htmlobj.responseText);
	}
	function loadManage(){
		$("a").removeClass("current");
		$("#manage").addClass("current");
		htmlobj=$.ajax({url:"/se/manage.ajax",async:false});
		$("#main-content").html("");
		$("#main-content").html(htmlobj.responseText);
	}
	function loadRatio(){
		$("a").removeClass("current");
		$("#ratio").addClass("current");
		htmlobj=$.ajax({url:"/se/ratio.ajax",async:false});
		$("#main-content").html("");
		$("#main-content").html(htmlobj.responseText);
	}
	function loadAjaxToMainContent(filename){
		$("a").removeClass("current");
		$("#"+filename+"").addClass("current");
		htmlobj=$.ajax({url:"/se/"+filename+".ajax",async:false});
		$("#main-content").html("");
		$("#main-content").html(htmlobj.responseText);
	}
</script>
</head>
<body>
<div id="body-wrapper">
  <!-- Wrapper for the radial gradient background -->
  <div id="sidebar">
    <div id="sidebar-wrapper">
      <!-- Sidebar with logo and menu -->
      <h1 id="sidebar-title"><a href="#">UIC</a></h1>
      <!-- Logo (221px wide) -->
      <a href="#"><img id="logo" src="resources/images/logo.png" alt="UIC room booking logo" /></a>
      <!-- Sidebar Profile links -->
      <div id="profile-links"> Hello, <a id="username" href="#" title="Edit your profile">user</a>|
        <a href="login.html" title="Sign Out" onclick="logout()">Sign out</a> </div>
      <ul id="main-nav">
        <!-- Accordion Menu -->
        <li> <a id="portal" class="nav-top-item" onclick="loadPortal()">
          <!-- Add the class "no-submenu" to menu items with no sub menu -->
          Portal </a> </li>
        <li> <a id="query" class="nav-top-item" onclick="loadQuery()">
          Query and Apply Room </a> </li>
        <li> <a id="app" class="nav-top-item" onclick="loadApp()">
          My Applications </a>
        </li>
        <li> <a href="#" class="nav-top-item">Room Information Management</a>
          <ul>
            <li><a href="#">Upload Room Information</a></li>
            <li><a href="#">Maintain Room Information </a></li>
          </ul>
        </li>
        <li> <a id="manage" onclick="loadManage()" class="nav-top-item">User Management </a>
        </li>
        <li> <a id="ratio" onclick="loadRatio()" class="nav-top-item"> View Use Ratio </a>
        </li>
      </ul>
      <!-- End #main-nav -->
      <!-- End #messages -->
    </div>
  </div>
  <!-- End #sidebar -->
  <div id="main-content">
    
  <!-- End #main-content -->
  </div>
</div>
</body>
<!-- Download From www.exet.tk-->
</html>
